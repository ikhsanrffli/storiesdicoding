<div class="add-story-container page-container">
Â  <div class="add-story-card content-card">
Â  Â  <h2>BAGIKAN CERITAMU</h2>
Â  Â  <p>Pilih lokasi di peta dan unggah cerita Anda. Setiap cerita adalah berita!</p>

Â  Â  <form id="add-story-form">
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label for="description-input">Deskripsi:</label>
Â  Â  Â  Â  <textarea id="description-input" name="description" rows="4" required placeholder="Tulis cerita Anda di sini..."></textarea>
Â  Â  Â  </div>

Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label for="photo-input">Unggah Foto (maks. 1MB):</label>
Â  Â  Â  Â  <input type="file" id="photo-input" name="photo" accept="image/*" required>
Â  Â  Â  Â  <div id="preview-img" class="preview-container"></div>
Â  Â  Â  </div>

<div class="form-group camera-group">
Â  <label>Ambil Foto Langsung:</label>
Â  <button type="button" id="camera-btn" class="btn btn-outline" aria-label="Buka kamera perangkat">ðŸ“· Buka Kamera</button>
Â  <video id="video" autoplay style="display:none; max-width: 100%; margin-top: 10px;" aria-label="Live video feed dari kamera"></video>
Â  Â  <button type="button" id="capture-btn" class="btn btn-success" style="display:none;">Ambil Foto</button>
Â  <button type="button" id="cancel-btn" class="btn btn-outline" style="display:none;">Batal</button>
</div>

Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label>Pilih Lokasi di Peta:</label>
Â  Â  Â  Â  <div id="map" class="map-container" role="img" aria-label="Peta interaktif untuk memilih lokasi cerita"></div>
Â  Â  Â  Â  <input type="hidden" id="lat-input" name="lat"> 
Â  Â  Â  Â  <input type="hidden" id="lon-input" name="lon">
Â  Â  Â  </div>

Â  Â  Â  <button type="submit" id="submit-btn" class="btn btn-primary">Kirim Cerita</button>
Â  Â  </form>
Â  </div>
</div>

<script>
Â  // Cek status login saat halaman dimuat
Â  const token = localStorage.getItem('token');
Â  const container = document.querySelector('.add-story-container');

Â  if (!token) {
Â  Â  container.innerHTML = `
Â  Â  Â  <div class="add-story-card content-card">
Â  Â  Â  Â  <h2>BAGIKAN CERITAMU!</h2>
Â  Â  Â  Â  <p>Silakan login terlebih dahulu untuk berbagi cerita.</p>
Â  Â  Â  Â  <a href="#/login" class="btn btn-primary" style="width: 100%;">Login</a>
Â  Â  Â  </div>
Â  Â  `;
Â  } else {
Â  Â  // Tampilkan skeleton dulu (opsional, tidak ada fungsi skeleton di sini)

Â  Â  // Lalu inisialisasi peta dan form
Â  Â  setTimeout(() => {
Â  Â  Â  // initMap dipanggil dari form.js
Â  Â  Â  import('../scripts/form.js').then(m => m.setupForm());
Â  Â  }, 300);
Â  }
</script>